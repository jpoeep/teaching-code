<html>
    <body>
        <script src="script.js"></script>
        <script>
            (function() {
                document.title = "Experimental";
                
                /*var img = new Image();
                img.src = "../*/
                
                /*var div = $("body").create("div");
                div.css("width, height", "100px");
                div.css("background", "black");
                div.css("borderRadius", parseInt(div.width) + "px");
                div.css("position", "absolute");
                
                var bottom = parseInt(div.height);*/
                
                function round(num) {
                    var str = String(num);
                    var result = [];
                    for(var i = 0; i < str.length; i++) {
                        if(i < str.length - 1) {
                            result.push(str[i]);
                        }
                        else if(i == str.length - 1) {
                            result.push(0);
                        }
                    }
                    
                    return Math.round(eval(result.join("")));
                }
                
                var xBloc;
                var yBloc;
                var tickMode = "paused";
                
                document.onmousemove = function(e) {
                    xBloc = round((e.clientX / window.innerHeight) * 64);
                    yBloc = round((e.clientY / window.innerHeight) * 64);
                }
                
                document.onkeydown = function(e) {
                    if(e.keyCode == 32) {
                        if(tickMode === "paused") {
                            tickMode = "running";
                        }
                        else if(tickMode === "running") {
                            tickMode = "paused";
                        }
                    }
                }
                
                document.onclick = function(e) {
                    if(tickMode === "paused") {
                        if(e.target.className != "cell") {
                            var cell = $("body").create("div");
                            cell.className = "cell";
                            cell.isAlive = true;
                            cell.css("width, height", window.innerHeight / 64 + "px");
                            cell.css("position", "absolute");
                            cell.css("left", window.innerHeight / 64 * xBloc + "px");
                            cell.css("top", window.innerHeight / 64 * yBloc + "px");
                            cell.xBloc = xBloc;
                            cell.yBloc = yBloc;
                        }
                        else if(e.target.className === "cell") {
                            if(e.target.isAlive == true) {
                                e.target.isAlive = false;
                            }
                            else if(e.target.isAlive == false) {
                                e.target.isAlive = true;
                            }
                        }
                    }
                }
                
                object.isNeighborOf = function(targetCell) {
                    if(this != targetCell) {
                        var xCol = false, yCol = false;
                        if(this.offsetLeft + this.clientWidth == targetCell.offsetLeft || targetCell.offsetLeft + targetCell.clientWidth == this.offsetLeft || this.offsetLeft == targetCell.offsetLeft) {
                            xCol = true;
                        }
                        if(this.offsetTop + this.clientHeight == targetCell.offsetTop || targetCell.offsetTop + targetCell.clientHeight == this.offsetTop || this.offsetTop == targetCell.offsetTop) {
                            yCol = true;
                        }

                        if(xCol && yCol == true) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    }
                }
                
                loop(function() {
                    if($(".cell").tagName) {
                        if($(".cell").isAlive == true) {
                            $(".cell").css("background", "lightgreen");
                        }
                        else if($(".cell").isAlive == false) {
                            $(".cell").css("background", "grey");
                        }
                    }
                    else if($(".cell").length) {
                        for(var i = 0; i < $(".cell").length; i++) {
                            if($(".cell")[i].isAlive == true) {
                                $(".cell")[i].css("background", "lightgreen");
                            }
                            else if($(".cell")[i].isAlive == false) {
                                $(".cell")[i].css("background", "grey");
                            }
                        }
                    }
                });
            })();
        </script>
    </body>
</html>
